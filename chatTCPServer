import socket
import threading

SERVER_IP = ''
SERVER_PORT = 9999


stop_flag = threading.Event()

clients = []
niacknames = []


def clean(client):
  index = clients.index(clinet)
  clients.remove(client)
  nickname = nicknames[index]
  broadcast(f'{nickname} left the chat')


def broadcast(message)
  for client in clients
    try:
      client.send(message)




def served_handle(client):
  while not stop_flag.is_set():

    try:
      message = client.recv(1024)
      if(message.decode() == 'exit'):
        client(client)
        break
      else:
        print(message)
        broadcase(message)




if __name__ == '__main__':
  finish = False
  with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as server:
    server.bind((SERVER_IP, SERVER_PORT))
    server.listen(5)
    print('Server is up and listening .....')

    while True:
      client_conn, address = server.accept()
      print(f'Connected with {str(address)}')

      nickname = client_conn.recv(1024).decode()

      print(f'Nickname
